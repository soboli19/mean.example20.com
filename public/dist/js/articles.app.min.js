var articlesApp=function(){function e(e,t,n){let a=document.getElementById(e);a.addEventListener("submit",(function(e){e.preventDefault();let i=new FormData(a),l=`${window.location.origin}${t}`,r=new XMLHttpRequest;r.open(n,l),r.setRequestHeader("Content-Type","application/json; charset=UTF-8");let d={};i.forEach((function(e,t){d[t]=e})),r.send(JSON.stringify(d)),r.onload=function(){!0===JSON.parse(r.response).success?window.location.href="/articles/app":document.getElementById("formMsg").style.display="block"}}))}return{deleteArticle:function(e){deleteArticle(e)},load:function(){let t=window.location.hash.split("-");switch(t[0]){case"#create":document.getElementById("app").innerHTML='\n                <div class="card">\n                  <div class="card-header clearfix">\n                    <h2 class="h3 float-left">Create a New Post</h2>\n                    <div class="float-right">\n                      <a href="#" class="btn btn-primary">Cancel</a>\n                    </div>\n                  </div>\n                  <div class="card-body">\n                  <form id="createUser" class="card-body">\n                    <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n          \n                      <div class="row">\n                        <div class="form-group col-md-6">\n                          <label for="first_name">Title</label>\n                          <input type="text" id="first_name" name="first_name" class="form-control" required>\n                        </div>\n          \n                        <div class="form-group col-md-6">\n                          <label for="last_name">Published</label>\n                          <input type="datetime-local" id="published" name="published" class="form-control" required>\n                        </div>\n                      </div>\n          \n                      <div class="row">\n                        <div class="form-group col-md-6">\n                          <label for="username">Body</label>\n                          <textarea id="body" name="body" class="form-control" rows="6" required></textarea>\n                        </div>\n          \n                        <div class="form-group col-md-6">\n                        <label for="description">Summary</label>\n                        <input type="text" id="description" name="description" class="form-control" required>\n                        </div>\n                      </div>\n          \n                      <div class="text-right">\n                        <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                      </div>\n                    </form>\n                  </div>\n                </div>\n            ',e("createArticle","/api/articles","POST");break;case"#view":!function(e){let t=`${window.location.origin}/api/articles/${e}`,n=new XMLHttpRequest;n.open("GET",t),n.setRequestHeader("Content-Type","application/json; charset=UTF-8"),n.send(),n.onload=function(){let e=document.getElementById("app"),t=JSON.parse(n.response),a="";a=`<div class="card">\n                <div class="card-header clearfix">\n                  <h2 class="h3 float-left">${t.article.title}</h2>\n                  <div class="float-right">\n                    <a href="#edit--${t.article._id}" class="btn btn-primary">Edit</a>\n                  </div>\n                </div>\n                <div class="card-body">\n                  <div>${t.article.body}</div>\n                  <div>${t.article.keywords}</div>\n                </div>\n              </div>`,e.innerHTML=a}}(t[1]);break;case"#edit":!function(t){let n=`${window.location.origin}/api/articles/${t}`,a=new XMLHttpRequest;a.open("GET",n),a.setRequestHeader("Content-Type","application/json; charset=UTF-8"),a.send(),a.onload=function(){let t=document.getElementById("app"),n=JSON.parse(a.response);var i=`\n                <div class="card">\n                  <div class="card-header clearfix">\n                    <h2 class="h3 float-left">Edit</h2>\n                    <div class="float-right">\n                      <a href="#" class="btn btn-primary">Cancel</a>\n                    </div>\n                  </div>\n                  <div class="card-body">\n                    <form id="editUser" class="card-body">\n                      <input type="hidden" id="_id" name="_id" value="${n.user._id}">\n                      <div id="formMsg" class="alert alert-danger text-center">Your form has errors</div>\n            \n                      <div class="row">\n                        <div class="form-group col-md-6">\n                          <label for="first_name">First Name</label>\n                          <input type="text" id="title" name="title" class="form-control" value="${n.article.title}" required>\n                        </div>\n            \n                        <div class="form-group col-md-6">\n                          <label for="last_name">Last Name</label>\n                          <input type="datetime-local" id="published" name="published" class="form-control" value="${date}" required>\n                        </div>\n                      </div>\n            \n                      <div class="row">\n                        <div class="form-group col-md-6">\n                          <label for="username">Body</label>\n                          <textarea id="body" name="body" class="form-control" rows="6" required>${n.article.body}</textarea>\n                        </div>\n            \n                        <div class="form-group col-md-6">\n                          <label for="email">Summary</label>\n                          <input type="text" id="description" name="description" class="form-control" value="${n.article.description}" required>\n                        </div>\n                      </div>\n            \n                      <div class="text-right">\n                        <input type="submit" value="Submit" class="btn btn-lg btn-primary btn-sm-block">\n                      </div>\n                    </form>\n                  </div>\n                </div>\n                <div>\n                <a href="#delete-${n.article._id}" class="text-danger">Delete</a>\n              </div>\n                `;t.innerHTML=i,e("editArticle","/api/articles","PUT")}}(t[1]);break;case"#delete":deleteView(t[1]);break;default:!function(){let e=window.location.origin+"/api/articles",t=new XMLHttpRequest;t.open("GET",e),t.setRequestHeader("Content-Type","application/json; charset=UTF-8"),t.send(),t.onload=function(){let e=document.getElementById("app"),n=JSON.parse(t.response).articles;console.log(n.length);let a="",i="";for(let e=0;e<n.length;e++)i=i+`<tr>\n                <td>\n                  <a href="#view-${n[e]._id}">${n[e].title}</a>\n                </td>\n                <td>${n[e].description}</td>\n                <td>`+(n[e].published?""+n[e].published.slice(0,19).replace("T"," "):"No Publication Date Set")+"\n              </td>\n              </tr>";a=`<div class="card">\n              <div class="card-header clearfix">\n                <h2 class="h3 float-left">Articles</h2>\n                <div class="float-right">\n                  <a href="#create" class="btn btn-primary">New Post</a>\n                </div>\n              </div>\n              <div class="table-responsive">\n                <table class="table table-striped table-hover table-bordered">\n                  <thead>\n                    <tr>\n                      <td>Title</td>\n                      <td>Description</td>\n                      <td>Date</td>\n                    </tr>\n                  </thead>\n                  <tbody>${i}</tbody>\n                </table>\n              </div>\n            </div>`,e.innerHTML=a}}()}}}}();articlesApp.load();